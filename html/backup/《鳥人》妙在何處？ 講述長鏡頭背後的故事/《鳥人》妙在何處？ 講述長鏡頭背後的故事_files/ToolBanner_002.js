var ToolBannerShareControlManager;var siteCommunityServiceUrl=siteCommunityServiceUrl||"http://service.community.mtime.com";var RightFloatToolsControl=Class.create();Object.extend(RightFloatToolsControl.prototype,{options:{editorComment:"",hasSearchButton:true,hasShareButton:true,hasFavoriteButton:true,hasMessageButton:true,hasCodeButton:true,hasTopButton:true,conversionUrl:"",shareRelatedObjType:"",relatedId:0,expandId:0,autoLoad:"",screenshotImageUrl:"",movieTitle:"",cityName:"",imageUrl:"",imagePath:"",link:"",videoId:0,title:"",fullTitle:"",pic:"",desc:"",expandMovieId:0,date:new Date(),isLogin:false,signInUrl:"",relatedObjId:0,relatedObjType:0,hasFavorited:false,codeTemplate:'<dl><dt><img src="#{codeUrl}" width="115" height="115"></dt><dd><p>扫描二维码</p><p>手机浏览页面</p></dd></dl>'},server:{getFavoriteCategorys:function(d,c,b,a){if(siteCommunityServiceUrl){return Mtime.Component.Ajax.crossDomainCallBack(siteCommunityServiceUrl,"Mtime.Community.Services.CommunityService","GetFavoriteCategorys2",[d,c,b],a,"/community.api?Ajax_CallBack=true","post","20000")}}},initialize:function(a){this.setOptions(a);this.initializeDom();this.initializeEvent();this.load()},setOptions:function(a){Object.extend(Object.extend(this,this.options),a)},initializeDom:function(){this.scrolltop=0;this.addDOM();this.rightFloatControls=this.rightFloatControl.immediateDescendants();this.topbar=$("topbar");this.isSearch=true},initializeEvent:function(){if(this.rightFloatControl){this.onClickRigtFloatHandler=this.onClickRigtFloat.bind(this);Event.observe(this.rightFloatControl,"click",this.onClickRigtFloatHandler)}this.onClickBodyHandler=this.onClickBody.bind(this);Event.observe(document.body,"click",this.onClickBodyHandler);Event.observe(window,"unload",this.close.bind(this));this.setIntervalTimer()},load:function(){if(this.hasFavoriteButton){this.server.getFavoriteCategorys(this.relatedObjType,this.relatedObjId,true,function(a){if(a&&a.value){if(a.value.isLogin&&a.value.hasFavorited&&this.favoritebar){this.favoritebar.addClassName("curron");this.favoritebar.title="已收藏"}}}.bind(this))}},addDOM:function(){this.showButtonMethod(this.rightFloatControls);this.rightFloatControl=Builder.node("div",{className:"mtimebar"},[this.searchbar,this.sharebar,this.favoritebar,this.messagebar,this.codebar,this.tooltopbar,this.sharebox,this.favoritbox,this.codebox]);document.body.appendChild(this.rightFloatControl)},showButtonMethod:function(){if(!this.hasSearchButton){this.searchbar=$(Builder.node("div",{className:"searchbar",title:"搜索",style:"display:none"}))}else{this.searchbar=$(Builder.node("div",{className:"searchbar",title:"搜索",method:"search",style:"display:none"},[Builder.node("b",{className:"baron",method:"search"},["搜索"])]))}if(!this.hasShareButton){this.sharebar=$(Builder.node("div",{className:"sharebar",title:"分享",style:"display:none"}))}else{this.sharebar=$(Builder.node("div",{className:"sharebar",title:"分享",method:"share"},[Builder.node("b",{className:"baron",method:"share"},["分享"])]))}if(!this.hasFavoriteButton){this.favoritebar=$(Builder.node("div",{className:"collectbar",title:"收藏",style:"display:none"}))}else{this.favoritebar=$(Builder.node("div",{className:"collectbar",title:"收藏",method:"favorite"},[Builder.node("b",{className:"baron",method:"favorite"},["收藏"])]))}if(!this.hasMessageButton){this.messagebar=$(Builder.node("div",{className:"messagebar",title:"留言",style:"display:none"}))}else{this.messagebar=$(Builder.node("div",{className:"messagebar",title:"留言",method:"message"},[Builder.node("b",{className:"baron",method:"message"},["留言"])]))}if(!this.hasCodeButton){this.codebar=$(Builder.node("div",{className:"codebar",title:"二维码",style:"display:none"}))}else{this.codebar=$(Builder.node("div",{className:"codebar",title:"二维码",method:"code"},[Builder.node("b",{className:"baron",method:"code"},["二维码"])]))}if(!this.hasTopButton){this.tooltopbar=$(Builder.node("div",{className:"topbar",title:"返回顶部",style:"display:none"}))}else{this.tooltopbar=$(Builder.node("div",{className:"topbar",title:"返回顶部",method:"backtop",style:"visibility:hidden"},[Builder.node("b",{className:"baron",method:"backtop"},["返回顶部"])]))}this.sharebox=$(Builder.node("div",{className:"sharebox",style:"display:none;"}));this.favoritbox=$(Builder.node("div",{className:"collectbox",style:"display:none;"}));this.codebox=$(Builder.node("div",{className:"codebox",style:"display:none;"}));nullDiv=null},onClickBody:function(b){var a=Event.element(b);var c=a.up(".mtimebar");if(c!==this.rightFloatControl){this.removeClassName()}},onClickRigtFloat:function(e){this.clickElement=Event.element(e);var g=this.clickElement.readAttribute("method");if(!this.clickElement||this.clickElement===document.body){return}switch(g){case"search":this.removeClassName();if(this.topbar){if(this.isSearch){this.lockTopBar=true;this.isSearch=false;this.topbar.addClassName("scrolltop");this.scrolltop=document.documentElement.scrollTop||document.body.scrollTop;this.topbarHeight=this.topbar.getHeight();var f=this.topbar.down(".menubg");this.topbarHeight+=f.getHeight();this.topbar.style.top=-this.topbarHeight+"px";var a=this.topbar.down(".bartop");var b=0;if(a){b=a.getHeight()}var h=this.topbar.down(".topline");if(!h){h=this.topbar.down(".bartop")}var j=h.getHeight()+b;document.body.style.paddingTop=j+"px";this.topbar.addClassName("transition6");FunctionExt.defer(function(){this.topbar.style.position="fixed";this.topbar.style.top="0px";f=h=j=a=b=null},200,this)}else{this.topbarAnimate()}}break;case"share":this.removeClassName();if(typeof ShareControlManager!=="undefined"){this.instanceShareControl()}else{$loadJs("/js/2014/share.js",function(){this.instanceShareControl()}.bind(this))}this.sharebar.addClassName("curr");this.sharebox.show();break;case"favorite":this.removeClassName();if(typeof FavoriteButtonControl!=="undefined"){this.instanceCollectControl()}else{$loadJs("/js/2014/favorite.js",function(){this.instanceCollectControl()}.bind(this))}break;case"message":this.removeClassName();if($(this.editorComment)){var d=$(this.editorComment);var c=$("commentRegion");if(c){c.scrollTo()}else{d.scrollTo()}d.focus();d=null}break;case"code":if(this.codebar.hasClassName("curr")){this.removeClassName()}else{this.removeClassName();this.setClassName();this.builderCodeMethod()}break;case"backtop":this.removeClassName();document.body.scrollIntoView();break}g=null},instanceShareControl:function(){if(typeof ToolBannerShareControlManager=="undefined"){ToolBannerShareControlManager=new ShareControlManager()}if(!this.shareControlManager){this.shareControlManager=ToolBannerShareControlManager.initShareControl([{shareRelatedObjType:this.shareRelatedObjType,relatedId:this.relatedId,expandId:this.expandId,autoLoad:this.autoLoad,screenshotImageUrl:this.screenshotImageUrl,movieTitle:this.movieTitle,cityName:this.cityName,imageUrl:this.imageUrl,imagePath:this.imagePath,link:this.link,videoId:this.relatedId,title:this.title,fullTitle:this.fullTitle,pic:this.pic,date:this.date,desc:this.desc,shareButton:this.sharebar,expandMovieId:this.expandMovieId,shareContainer:this.sharebox,callback:this.removeClassName.bind(this)}])}},instanceCollectControl:function(){if(!this.favoriteButtonControl){this.favoriteButtonControl=new FavoriteButtonControl({shareRelatedObjType:this.shareRelatedObjType,isLogin:this.isLogin,signInUrl:this.signInUrl,relatedObjId:this.relatedObjId,relatedObjType:this.relatedObjType,hasFavorited:this.hasFavorited,favoriteButton:this.favoritebar,favoriteContainer:this.favoritbox,callback:this.removeClassName.bind(this)})}},builderCodeMethod:function(){var b,c={},f=new Template(this.codeTemplate),a=new StringBuilder(),e="";if(this.conversionUrl!==""){e=encodeURIComponent(this.conversionUrl)}else{if(getNewValue){e=encodeURIComponent(getNewValue(location.href))}else{e=encodeURIComponent(location.href)}}c.codeUrl=siteServiceUrl+"/GetQrCodeHandler.ashx?qrCodeStr="+e;b=f.evaluate(c);var d=Builder.build(b);this.codebox.appendChild(d);this.codebox.show()},setClassName:function(){for(var a=0;a<=5;a++){if(this.rightFloatControls[a]!==this.clickElement){this.rightFloatControls[a].addClassName("notcurr")}else{this.rightFloatControls[a].addClassName("curr")}}},removeClassName:function(a){var b,c=9,d=9;if(a){if(a===this.sharebar){c=1;d=6}else{if(a===this.favoritebar){c=2;d=7}}}for(b=0;b<=5;b++){if(c!==b){if(this.rightFloatControls[b].hasClassName("notcurr")){this.rightFloatControls[b].removeClassName("notcurr")}if(this.rightFloatControls[b].hasClassName("curr")){this.rightFloatControls[b].removeClassName("curr")}}}for(b=6;b<=8;b++){if(d!==b){this.rightFloatControls[b].hide()}}this.codebox.innerHTML="";b=c=d=null},setIntervalTimer:function(){var a,b;b=document.documentElement.scrollTop||document.body.scrollTop;if(this.scrolltop!==b&&this.topbar&&this.lockTopBar){this.topbarAnimate()}if(b<200){if(this.searchbar){this.searchbar.hide()}if(this.tooltopbar){this.tooltopbar.style.visibility="hidden"}}else{if(this.searchbar){this.searchbar.show()}if(this.tooltopbar){this.tooltopbar.style.visibility="visible"}}a=b=null;this.myTimer=setTimeout(function(){this.setIntervalTimer()}.bind(this),2000)},topbarAnimate:function(){this.topbar.style.top=-this.topbarHeight+"px";FunctionExt.defer(function(){this.topbar.removeClassName("transition6");this.topbar.removeClassName("scrolltop");this.topbar.style.top="0px";this.topbar.style.position="";document.body.style.paddingTop="";this.lockTopBar=false;this.isSearch=true},600,this)},close:function(){this.destroyEvent();this.destroyDOM();this.destroyField()},destroyField:function(){},destroyEvent:function(){if(this.rightFloatControl){Event.stopObserving(this.rightFloatControl,"click",this.onClickRigtFloatHandler)}Event.stopObserving(document.body,"click",this.onClickBodyHandler)},destroyDOM:function(){this.rightFloatControl=null;this.myTimer&&clearTimeout(this.myTimer);this.myTimer=null}});var CrosswiseTools=Class.create();Object.extend(CrosswiseTools.prototype,RightFloatToolsControl.prototype);Object.extend(CrosswiseTools.prototype,{options:{slidesRegion:"",slidesRegionEl:null,editorComment:"",editorUrl:"",hasShareButton:true,hasFavoriteButton:true,expandMovieId:0,shareRelatedObjType:"",relatedId:0,expandId:0,autoLoad:"",screenshotImageUrl:"",movieTitle:"",cityName:"",imageUrl:"",imagePath:"",link:"",videoId:0,title:"",fullTitle:"",pic:"",desc:"",shareSuccessCallBack:null,date:new Date(),isLogin:false,signInUrl:"",relatedObjId:0,relatedObjType:0,hasFavorited:false},initializeEvent:function(){if(this.rightFloatControl){this.onClickRigtFloatHandler=this.onClickRigtFloat.bind(this);Event.observe(this.rightFloatControl,"click",this.onClickRigtFloatHandler)}Event.observe(window,"unload",this.close.bind(this))},load:function(){},addDOM:function(){this.slidesRegion=$(this.slidesRegion);if(!this.slidesRegion&&this.slidesRegionEl){this.slidesRegion=this.slidesRegionEl}this.showButtonMethod(this.rightFloatControls);this.rightFloatControl=$(Builder.node("div",{className:"smtimebar"},[this.sharebar,this.favoritebar,this.messagebar,this.sharebox,this.favoritbox]));if(this.slidesRegion){this.slidesRegion.appendChild(this.rightFloatControl)}},showButtonMethod:function(){var b=$(Builder.node("div",{style:"display:none"}));if(!this.hasShareButton){this.sharebar=$(Builder.node("div",{className:"sharebar",title:"分享",style:"display:none"}))}else{this.sharebar=$(Builder.node("div",{className:"sharebar",title:"分享",method:"share"},[Builder.node("b",{className:"baron",method:"share"},["分享"])]))}if(!this.hasFavoriteButton){this.favoritebar=$(Builder.node("div",{className:"collectbar",title:"收藏",style:"display:none"}))}else{this.favoritebar=$(Builder.node("div",{className:"collectbar",title:"收藏",method:"favorite"},[Builder.node("b",{className:"baron",method:"favorite"},["收藏"])]))}if(!this.editorUrl){this.messagebar=$(Builder.node("div",{className:"messagebar",title:"留言",style:"display:none"}))}else{var a=this.editorComment===""?this.editorUrl:this.editorUrl+"#"+this.editorComment;this.messagebar=Builder.node("div",{className:"messagebar",title:"留言"},[Builder.node("a",{className:"baron",href:a,target:"_blank"},["留言"])]);a=null}this.sharebox=$(Builder.node("div",{className:"sharebox",style:"display:none;"}));this.favoritbox=$(Builder.node("div",{className:"collectbox",style:"display:none;"}));b=null},onClickRigtFloat:function(a){this.clickElement=Event.element(a);if(!this.clickElement.readAttribute){return}var b=this.clickElement.readAttribute("method");switch(b){case"share":this.removeClassName();if(typeof ShareControlManager!=="undefined"){this.instanceShareControl()}else{$loadJs("/js/2014/share.js",function(){this.instanceShareControl()}.bind(this))}this.sharebar.addClassName("curr");this.sharebox.show();break;case"favorite":this.removeClassName();if(typeof FavoriteButtonControl!=="undefined"){this.instanceCollectControl()}else{$loadJs("/js/2014/favorite.js",function(){this.instanceCollectControl()}.bind(this))}break}},instanceShareControl:function(){if(typeof ToolBannerShareControlManager=="undefined"){ToolBannerShareControlManager=new ShareControlManager()}if(!this.shareControlManager){this.shareControlManager=ToolBannerShareControlManager.initShareControl([{shareRelatedObjType:this.shareRelatedObjType,expandId:this.expandId,relatedId:this.relatedId,autoLoad:this.autoLoad,screenshotImageUrl:this.screenshotImageUrl,movieTitle:this.movieTitle,cityName:this.cityName,imageUrl:this.imageUrl,imagePath:this.imagePath,link:this.link,videoId:this.relatedId,title:this.title,fullTitle:this.fullTitle,pic:this.pic,date:this.date,desc:this.desc,shareButton:this.sharebar,shareContainer:this.sharebox,expandMovieId:this.expandMovieId,shareControlStyleType:2,callback:this.removeClassName.bind(this),shareSuccessCallBack:this.shareSuccessCallBack}])}},instanceCollectControl:function(){if(!this.favoriteButtonControl){this.favoriteButtonControl=new FavoriteButtonControl({shareRelatedObjType:this.shareRelatedObjType,isLogin:this.isLogin,signInUrl:this.signInUrl,relatedObjId:this.relatedObjId,relatedObjType:this.relatedObjType,hasFavorited:this.hasFavorited,favoriteButton:this.favoritebar,favoriteContainer:this.favoritbox,favoriteControlStyleType:2,callback:this.removeClassName.bind(this)})}},setClassName:function(){},removeClassName:function(a){num1=9,num2=9;if(a){if(a===this.sharebar){num1=0;num2=3}else{if(a===this.favoritebar){num1=1;num2=4}}}for(i=0;i<3;i++){if(num1!==i){if(this.rightFloatControls[i].hasClassName("notcurr")){this.rightFloatControls[i].removeClassName("notcurr")}if(this.rightFloatControls[i].hasClassName("curr")){this.rightFloatControls[i].removeClassName("curr")}}}for(i=3;i<5;i++){if(num2!==i){this.rightFloatControls[i].hide()}}}});var ProductTools=Class.create();Object.extend(ProductTools.prototype,CrosswiseTools.prototype);Object.extend(ProductTools.prototype,{options:{slidesRegion:"",hasShareButton:true,hasFavoriteButton:true,hasCodeButton:true,slidesRegionEl:null,shareRelatedObjType:"",relatedId:0,link:"",title:"",pic:"",goodsId:0,pageName:"",sharePan:"",favoritePan:"",codePan:""},hasIsLogin:function(c,b,a){if(siteCommunityServiceUrl){return Mtime.Component.Ajax.crossDomainCallBack(siteCommunityServiceUrl,"Mtime.Community.Services.CommunityService","HasIsLogin",[c,b],a,"/community.api?Ajax_CallBack=true","post","20000")}},initializeEvent:function(){if(this.rightFloatControl){this.onClickRigtFloatHandler=this.onClickRigtFloat.bind(this);Event.observe(this.rightFloatControl,"click",this.onClickRigtFloatHandler)}Event.observe(window,"unload",this.close.bind(this));this.onClickBodyHandler=this.onClickBody.bind(this);Event.observe(document.body,"click",this.onClickBodyHandler)},load:function(){if(this.hasFavoriteButton){this.hasIsLogin(this.goodsId,true,function(a){if(a&&a.value){if(a.value.isLogin&&a.value.hasFavorited&&this.favoritebar){this.favoritebar.addClassName("on");this.favoritebar.title="已收藏"}}}.bind(this))}if(typeof ShareControlManager!=="undefined"){this.instanceShareControl()}else{$loadJs("/js/2014/share.js",function(){this.instanceShareControl()}.bind(this))}},onClickBody:function(a){this.bodyClickRigtFloat(a)},addDOM:function(){this.slidesRegion=$(this.slidesRegion);if(!this.slidesRegion&&this.slidesRegionEl){this.slidesRegion=this.slidesRegionEl}this.showButtonMethod();this.rightFloatControl=$(Builder.node("dl",{},[this.codebar,this.favoritebar,this.sharebar,this.favoritbox]));if(this.slidesRegion){this.slidesRegion.appendChild(this.rightFloatControl)}},trackClick:function(a){if(typeof tracker!="undefined"){tracker.trackClick(this.pageName,a)}},showButtonMethod:function(){this.sharebox=$(Builder.node("div",{className:"sharebox",style:"display:none;"}));this.shareBtn=$(Builder.node("a",{className:"s_share",title:"分享"},[Builder.node("b",{className:"baron",method:"share"},["分享"]),Builder.node("i")]));if(!this.hasShareButton){this.sharebar=$(Builder.node("dd",{style:"display:none"}))}else{this.sharebar=$(Builder.node("dd",{method:"share"},[this.shareBtn,this.sharebox]))}if(this.sharePan!=""){Event.observe(this.sharebar,"click",function(){this.trackClick(this.sharePan)}.bind(this))}if(!this.hasFavoriteButton){this.favoritebar=$(Builder.node("dd",{className:"",title:"收藏",style:"display:none"}))}else{this.favoritebar=$(Builder.node("dd",{className:"",title:"收藏",method:"favorite"}));new Insertion.Bottom(this.favoritebar,'<a method="favorite" href="javascript:void(0)" class="s_fav" title="收藏"><i method="favorite"></i></a>')}if(this.favoritePan!=""){Event.observe(this.favoritebar,"click",function(){this.trackClick(this.favoritePan)}.bind(this))}if(!this.hasCodeButton){this.codebar=$(Builder.node("dd",{title:"二维码",style:"display:none"}))}else{this.codebar=$(Builder.node("dd",{title:"二维码",method:"code"}));new Insertion.Bottom(this.codebar,'<a method="code" href="javascript:void(0)" class="s_code" title="二维码"><b method="code">二维码</b><i method="code"></i></a><div style="display: none" class="codebox"><p><img class="codeImg" src="#" width="110" height="110" alt="二维码" /></p><p class="mt9">扫描二维码<br />手机浏览页面</p></div>')}if(this.codePan!=""){Event.observe(this.codebar,"click",function(){this.trackClick(this.codePan)}.bind(this))}this.favoritbox=$(Builder.node("div",{className:"collectbox",style:"display:none;"}))},onClickRigtFloat:function(a){this.clickElement=Event.element(a);if(!this.clickElement.readAttribute){return}if(this.clickElement.previous("b")&&this.clickElement.previous("b").hasAttribute("method")){this.clickElement=this.clickElement.previous("b")}var b=this.clickElement.readAttribute("method");switch(b){case"share":break;case"favorite":if(typeof FavoriteButtonControl!=="undefined"){this.instanceCollectControl()}else{$loadSubJs("/js/2014/favorite.js",function(){this.instanceCollectControl()}.bind(this))}break;case"code":if(this.codebar.hasClassName("on")){this.closeCode()}else{this.codebar.addClassName("on");this.builderCodeNode(this.codebar.down(".codeImg"))}break}},closeCode:function(){this.codebar.removeClassName("on");this.codebar.down(".codebox").hide()},closeShare:function(){this.sharebar.removeClassName("on");this.sharebar.down(".sharebox").hide()},bodyClickRigtFloat:function(a){this.clickElement=Event.element(a);if(!this.clickElement.readAttribute){return}var b=this.clickElement.readAttribute("method");switch(b){case"share":this.closeCode();break;case"favorite":this.closeCode();this.closeShare();break;case"code":this.closeShare();break;default:this.closeCode();this.closeShare();break}},instanceShareControl:function(){if(typeof ToolBannerShareControlManager=="undefined"){ToolBannerShareControlManager=new ShareControlManager()}if(!this.shareControlManager){this.shareControlManager=ToolBannerShareControlManager.initShareControl([{shareRelatedObjType:this.shareRelatedObjType,expandId:this.expandId,relatedId:this.relatedId,autoLoad:this.autoLoad,screenshotImageUrl:this.screenshotImageUrl,movieTitle:this.movieTitle,cityName:this.cityName,imageUrl:this.imageUrl,imagePath:this.imagePath,link:this.link,videoId:this.relatedId,title:this.title,fullTitle:this.fullTitle,pic:this.pic,date:this.date,desc:this.desc,shareButton:this.shareBtn,shareContainer:this.sharebox,expandMovieId:this.expandMovieId,callback:this.removeClassName.bind(this),shareSuccessCallBack:this.shareSuccessCallBack}])}},instanceCollectControl:function(){if(!this.favoriteButtonControl){this.favoriteButtonControl=new FavoriteButtonControlSCM({goodsId:this.goodsId,favoriteButton:this.favoritebar})}else{this.favoriteButtonControl.clickFavorite()}},builderCodeNode:function(b){var a="",c="";this.conversionUrl=this.link;if(this.conversionUrl!==""){c=encodeURIComponent(this.conversionUrl)}else{if(getNewValue){c=encodeURIComponent(getNewValue(location.href))}else{c=encodeURIComponent(location.href)}}a=siteServiceUrl+"/GetQrCodeHandler.ashx?qrCodeStr="+c;b.setAttribute("src",a);this.codebar.down(".codebox").show()},removeClassName:function(a){this.closeCode()}});var IndexShareToolsControl=Class.create();Object.extend(IndexShareToolsControl.prototype,{name:"IndexShareToolsControl",initialize:function(){this.initializeField();this.initializeDOM();this.initializeControl();this.initializeEvent();this.load()},initializeField:function(){},initializeDOM:function(){this.ShareContrainerList=$$(".i_share")},destroyDOM:function(){this.ShareContrainerList=null},initializeControl:function(){this.rightCtrl=new RightFloatToolsControl({hasShareButton:false,hasFavoriteButton:false,hasMessageButton:false,hasCodeButton:false})},destroyControl:function(){if(this.ShareControlList){this.ShareControlList.each(function(a){a.close();a=null})}},initializeEvent:function(){},destroyEvent:function(){},load:function(){if(this.ShareContrainerList){var a=siteMcUrl+"/member/signin";this.ShareControlList=[];this.ShareContrainerList.each(function(g){var d=0;var l=g.readAttribute("method");switch(l){case"newsimgshare":var n=g.readAttribute("newsid");var q=g.readAttribute("newstitle");var p=g.readAttribute("newslink");var t=g.readAttribute("pic");var e="[今日时光网头条精选]："+q;var o=new CrosswiseTools({shareRelatedObjType:9981,slidesRegionEl:g,link:p,title:q,fullTitle:e,pic:t,isLogin:false,signInUrl:a,relatedId:n,relatedObjId:n,relatedObjType:51,hasFavorited:false});this.ShareControlList.push(o);break;case"hotplayimgshare":var m=g.readAttribute("movieid");var f=new CrosswiseTools({slidesRegionEl:g,shareRelatedObjType:1111,relatedId:m,isLogin:false,signInUrl:a,relatedObjId:m,relatedObjType:1,hasFavorited:false});this.ShareControlList.push(f);break;case"communityimgshare":var s=g.readAttribute("objtype");var r=g.readAttribute("objid");var u;var h=true;switch(s){case"9991":u=6;d=1;break;case"7001":u=10;break;case"6001":u=6;break;case"2201":u=22;h=false;break;default:return}var c=new CrosswiseTools({slidesRegionEl:g,shareRelatedObjType:s,relatedId:r,isLogin:false,signInUrl:a,relatedObjId:r,relatedObjType:u,hasFavorited:false,expandId:d,hasFavoriteButton:h});this.ShareControlList.push(c);break;case"communitycommentshare":var s=g.readAttribute("objtype");var r=g.readAttribute("objid");var k="";if(g.hasAttribute("title")){k=g.readAttribute("title")}var j="";if(g.hasAttribute("link")){j=g.readAttribute("link")}var u;var h=true;switch(s){case"9991":u=6;d=1;break;case"9992":u=78;break;case"9993":u=78;break;case"6001":u=6;break;case"7001":u=10;break;case"2201":u=22;h=false;break;case"6401":u=78;default:return}var b=new CrosswiseTools({slidesRegionEl:g,link:j,title:k,shareRelatedObjType:s,relatedId:r,isLogin:false,signInUrl:a,relatedObjId:r,relatedObjType:u,hasFavorited:false,expandId:d,hasFavoriteButton:h});this.ShareControlList.push(b);break}}.bind(this))}},close:function(){if(!this.closed){this.closed=true;this.destroyControl();this.destroyEvent();this.destroyDOM()}}});var movieDictionary=[{key:"http://movie.mtime.com/(\\d+)/reviews/(\\d+).[\\w\\W*?]",value:"http://m.mtime.cn/#!/review/detail/{1}/",isAppendGreedyValue:false},{key:"http://movie.mtime.com/(\\d+)/posters_and_images/(\\d+)([\\w\\W*?])",value:"http://m.mtime.cn/#!/movie/{0}/posters_and_images/{1}{2}/",isAppendGreedyValue:true},{key:"http://movie.mtime.com/(\\d+)/posters_and_images[\\w\\W*?]",value:"http://m.mtime.cn/#!/movie/{0}/posters_and_images/",isAppendGreedyValue:false},{key:"http://movie.mtime.com/(\\d+)([\\w\\W+?])",value:"http://m.mtime.cn/#!/movie/{0}{1}/",isAppendGreedyValue:true}];var personDictionary=[{key:"http://people.mtime.com/(\\d+)/photo_gallery/(\\d+)([\\w\\W*?])",value:"http://m.mtime.cn/#!/person/concreteImage/{0}/{1}{2}/",isAppendGreedyValue:true},{key:"http://people.mtime.com/(\\d+)/photo_gallery[\\w\\W*?]",value:"http://m.mtime.cn/#!/person/personImages/{0}/",isAppendGreedyValue:false},{key:"http://people.mtime.com/(\\d+)([\\w\\W*?])",value:"http://m.mtime.cn/#!/person/{0}{1}/",isAppendGreedyValue:true}];var newsDictionary=[{key:"http://news.mtime.com/(\\d+)/(\\d+)/(\\d+)/(\\d+).[\\w\\W*?]",value:"http://m.mtime.cn/#!/news/movie/{3}/",isAppendGreedyValue:false},{key:"http://news.mtime.com/pix/(\\d+)/(\\d+)/(\\d+)/(\\d+).[\\w\\W*?]",value:"http://m.mtime.cn/#!/news/gallery/{3}/",isAppendGreedyValue:false}];var otherDictionary=[{key:"http://i.mtime.com/(\\d+)/blog/(\\d+)([\\w\\W*?])",value:"http://m.mtime.cn/#!/review/detail/{1}{2}/",isAppendGreedyValue:true}];var dicArray=[movieDictionary,personDictionary,newsDictionary,otherDictionary];function stringFormat(a,e,d){for(var c=0;c<e.length;c++){var b="{"+c.toString()+"}";if(d&&c==e.length-1){if(isNaN(Number(e[c]))){e[c]=""}}a=a.replace(b,e[c])}return a}function getNewValue(b){var c="";for(var a=0;a<dicArray.length;a++){c=dictionaryMatch(b,dicArray[a]);if(c!==""){break}}return c===""?b:c}function dictionaryMatch(d,a){for(var b=0;b<a.length;b++){var e=new RegExp(a[b].key);var c=e.exec(d);if(typeof c!="undefined"&&c!=null&&c!=""){if(c.length!=0){c.splice(0,1);if(c.length!=0){return stringFormat(a[b].value,c,a[b].isAppendGreedyValue)}}}continue}return""};